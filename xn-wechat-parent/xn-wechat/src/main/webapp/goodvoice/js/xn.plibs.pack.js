/*! Sea.js 2.3.0 | seajs.org/LICENSE.md */
!function(a,b){function c(a){return function(b){return{}.toString.call(b)=="[object "+a+"]"}}function d(){return z++}function e(a){return a.match(C)[0]}function f(a){for(a=a.replace(D,"/"),a=a.replace(F,"$1/");a.match(E);)a=a.replace(E,"/");return a}function g(a){var b=a.length-1,c=a.charAt(b);return"#"===c?a.substring(0,b):".js"===a.substring(b-2)||a.indexOf("?")>0||"/"===c?a:a+".js"}function h(a){var b=u.alias;return b&&w(b[a])?b[a]:a}function i(a){var b=u.paths,c;return b&&(c=a.match(G))&&w(b[c[1]])&&(a=b[c[1]]+c[2]),a}function j(a){var b=u.vars;return b&&a.indexOf("{")>-1&&(a=a.replace(H,function(a,c){return w(b[c])?b[c]:a})),a}function k(a){var b=u.map,c=a;if(b)for(var d=0,e=b.length;e>d;d++){var f=b[d];if(c=y(f)?f(a)||a:a.replace(f[0],f[1]),c!==a)break}return c}function l(a,b){var c,d=a.charAt(0);if(I.test(a))c=a;else if("."===d)c=f((b?e(b):u.cwd)+a);else if("/"===d){var g=u.cwd.match(J);c=g?g[0]+a.substring(1):a}else c=u.base+a;return 0===c.indexOf("//")&&(c=location.protocol+c),c}function m(a,b){if(!a)return"";a=h(a),a=i(a),a=j(a),a=g(a);var c=l(a,b);return c=k(c)}function n(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}function o(a,b,c){var d=K.createElement("script");if(c){var e=y(c)?c(a):c;e&&(d.charset=e)}p(d,b,a),d.async=!0,d.src=a,R=d,Q?P.insertBefore(d,Q):P.appendChild(d),R=null}function p(a,b,c){function d(){a.onload=a.onerror=a.onreadystatechange=null,u.debug||P.removeChild(a),a=null,b()}var e="onload"in a;e?(a.onload=d,a.onerror=function(){B("error",{uri:c,node:a}),d()}):a.onreadystatechange=function(){/loaded|complete/.test(a.readyState)&&d()}}function q(){if(R)return R;if(S&&"interactive"===S.readyState)return S;for(var a=P.getElementsByTagName("script"),b=a.length-1;b>=0;b--){var c=a[b];if("interactive"===c.readyState)return S=c}}function r(a){var b=[];return a.replace(U,"").replace(T,function(a,c,d){d&&b.push(d)}),b}function s(a,b){this.uri=a,this.dependencies=b||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}if(!a.seajs){var t=a.seajs={version:"2.3.0"},u=t.data={},v=c("Object"),w=c("String"),x=Array.isArray||c("Array"),y=c("Function"),z=0,A=u.events={};t.on=function(a,b){var c=A[a]||(A[a]=[]);return c.push(b),t},t.off=function(a,b){if(!a&&!b)return A=u.events={},t;var c=A[a];if(c)if(b)for(var d=c.length-1;d>=0;d--)c[d]===b&&c.splice(d,1);else delete A[a];return t};var B=t.emit=function(a,b){var c=A[a],d;if(c){c=c.slice();for(var e=0,f=c.length;f>e;e++)c[e](b)}return t},C=/[^?#]*\//,D=/\/\.\//g,E=/\/[^/]+\/\.\.\//,F=/([^:/])\/+\//g,G=/^([^/:]+)(\/.+)$/,H=/{([^{]+)}/g,I=/^\/\/.|:\//,J=/^.*?\/\/.*?\//,K=document,L=location.href&&0!==location.href.indexOf("about:")?e(location.href):"",M=K.scripts,N=K.getElementById("seajsnode")||M[M.length-1],O=e(n(N)||L);t.resolve=m;var P=K.head||K.getElementsByTagName("head")[0]||K.documentElement,Q=P.getElementsByTagName("base")[0],R,S;t.request=o;var T=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,U=/\\\\/g,V=t.cache={},W,X={},Y={},Z={},$=s.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};s.prototype.resolve=function(){for(var a=this,b=a.dependencies,c=[],d=0,e=b.length;e>d;d++)c[d]=s.resolve(b[d],a.uri);return c},s.prototype.load=function(){var a=this;if(!(a.status>=$.LOADING)){a.status=$.LOADING;var c=a.resolve();B("load",c);for(var d=a._remain=c.length,e,f=0;d>f;f++)e=s.get(c[f]),e.status<$.LOADED?e._waitings[a.uri]=(e._waitings[a.uri]||0)+1:a._remain--;if(0===a._remain)return a.onload(),b;var g={};for(f=0;d>f;f++)e=V[c[f]],e.status<$.FETCHING?e.fetch(g):e.status===$.SAVED&&e.load();for(var h in g)g.hasOwnProperty(h)&&g[h]()}},s.prototype.onload=function(){var a=this;a.status=$.LOADED,a.callback&&a.callback();var b=a._waitings,c,d;for(c in b)b.hasOwnProperty(c)&&(d=V[c],d._remain-=b[c],0===d._remain&&d.onload());delete a._waitings,delete a._remain},s.prototype.fetch=function(a){function c(){t.request(g.requestUri,g.onRequest,g.charset)}function d(){delete X[h],Y[h]=!0,W&&(s.save(f,W),W=null);var a,b=Z[h];for(delete Z[h];a=b.shift();)a.load()}var e=this,f=e.uri;e.status=$.FETCHING;var g={uri:f};B("fetch",g);var h=g.requestUri||f;return!h||Y[h]?(e.load(),b):X[h]?(Z[h].push(e),b):(X[h]=!0,Z[h]=[e],B("request",g={uri:f,requestUri:h,onRequest:d,charset:u.charset}),g.requested||(a?a[g.requestUri]=c:c()),b)},s.prototype.exec=function(){function a(b){return s.get(a.resolve(b)).exec()}var c=this;if(c.status>=$.EXECUTING)return c.exports;c.status=$.EXECUTING;var e=c.uri;a.resolve=function(a){return s.resolve(a,e)},a.async=function(b,c){return s.use(b,c,e+"_async_"+d()),a};var f=c.factory,g=y(f)?f(a,c.exports={},c):f;return g===b&&(g=c.exports),delete c.factory,c.exports=g,c.status=$.EXECUTED,B("exec",c),g},s.resolve=function(a,b){var c={id:a,refUri:b};return B("resolve",c),c.uri||t.resolve(c.id,b)},s.define=function(a,c,d){var e=arguments.length;1===e?(d=a,a=b):2===e&&(d=c,x(a)?(c=a,a=b):c=b),!x(c)&&y(d)&&(c=r(""+d));var f={id:a,uri:s.resolve(a),deps:c,factory:d};if(!f.uri&&K.attachEvent){var g=q();g&&(f.uri=g.src)}B("define",f),f.uri?s.save(f.uri,f):W=f},s.save=function(a,b){var c=s.get(a);c.status<$.SAVED&&(c.id=b.id||a,c.dependencies=b.deps||[],c.factory=b.factory,c.status=$.SAVED,B("save",c))},s.get=function(a,b){return V[a]||(V[a]=new s(a,b))},s.use=function(b,c,d){var e=s.get(d,x(b)?b:[b]);e.callback=function(){for(var b=[],d=e.resolve(),f=0,g=d.length;g>f;f++)b[f]=V[d[f]].exec();c&&c.apply(a,b),delete e.callback},e.load()},t.use=function(a,b){return s.use(a,b,u.cwd+"_use_"+d()),t},s.define.cmd={},a.define=s.define,t.Module=s,u.fetchedList=Y,u.cid=d,t.require=function(a){var b=s.get(s.resolve(a));return b.status<$.EXECUTING&&(b.onload(),b.exec()),b.exports},u.base=O,u.dir=O,u.cwd=L,u.charset="utf-8",t.config=function(a){for(var b in a){var c=a[b],d=u[b];if(d&&v(d))for(var e in c)d[e]=c[e];else x(d)?c=d.concat(c):"base"===b&&("/"!==c.slice(-1)&&(c+="/"),c=l(c)),u[b]=c}return B("config",a),t}}}(this);

seajs.config({
	
});
(function(c,b){var a=b();if(window.define){define(c,function(){return a})}else{window[c]=a}})("zepto",function(require,exports,module){var undefined,key,$,classList,emptyArray=[],slice=emptyArray.slice,filter=emptyArray.filter,document=window.document,elementDisplay={},classCache={},cssNumber={"column-count":1,"columns":1,"font-weight":1,"line-height":1,"opacity":1,"z-index":1,"zoom":1},fragmentRE=/^\s*<(\w+|!)[^>]*>/,singleTagRE=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,tagExpanderRE=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,rootNodeRE=/^(?:body|html)$/i,capitalRE=/([A-Z])/g,methodAttributes=["val","css","html","text","data","width","height","offset"],adjacencyOperators=["after","prepend","before","append"],table=document.createElement("table"),tableRow=document.createElement("tr"),containers={"tr":document.createElement("tbody"),"tbody":table,"thead":table,"tfoot":table,"td":tableRow,"th":tableRow,"*":document.createElement("div")},readyRE=/complete|loaded|interactive/,classSelectorRE=/^\.([\w-]+)$/,idSelectorRE=/^#([\w-]*)$/,simpleSelectorRE=/^[\w-]*$/,class2type={},toString=class2type.toString,zepto={},camelize,uniq,tempParent=document.createElement("div"),propMap={"tabindex":"tabIndex","readonly":"readOnly","for":"htmlFor","class":"className","maxlength":"maxLength","cellspacing":"cellSpacing","cellpadding":"cellPadding","rowspan":"rowSpan","colspan":"colSpan","usemap":"useMap","frameborder":"frameBorder","contenteditable":"contentEditable"};zepto.matches=function(element,selector){if(!selector||!element||element.nodeType!==1){return false}var matchesSelector=element.webkitMatchesSelector||element.mozMatchesSelector||element.oMatchesSelector||element.matchesSelector;if(matchesSelector){return matchesSelector.call(element,selector)}var match,parent=element.parentNode,temp=!parent;if(temp){(parent=tempParent).appendChild(element)}match=~zepto.qsa(parent,selector).indexOf(element);temp&&tempParent.removeChild(element);return match};function type(obj){return obj==null?String(obj):class2type[toString.call(obj)]||"object"}function isFunction(value){return type(value)=="function"}function isWindow(obj){return obj!=null&&obj==obj.window}function isDocument(obj){return obj!=null&&obj.nodeType==obj.DOCUMENT_NODE}function isObject(obj){return type(obj)=="object"}function isPlainObject(obj){return isObject(obj)&&!isWindow(obj)&&Object.getPrototypeOf(obj)==Object.prototype}function isArray(value){return value instanceof Array}function likeArray(obj){return typeof obj.length=="number"}function compact(array){return filter.call(array,function(item){return item!=null})}function flatten(array){return array.length>0?$.fn.concat.apply([],array):array}camelize=function(str){return str.replace(/-+(.)?/g,function(match,chr){return chr?chr.toUpperCase():""})};function dasherize(str){return str.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}uniq=function(array){return filter.call(array,function(item,idx){return array.indexOf(item)==idx})};function classRE(name){return name in classCache?classCache[name]:(classCache[name]=new RegExp("(^|\\s)"+name+"(\\s|$)"))}function maybeAddPx(name,value){return(typeof value=="number"&&!cssNumber[dasherize(name)])?value+"px":value}function defaultDisplay(nodeName){var element,display;if(!elementDisplay[nodeName]){element=document.createElement(nodeName);document.body.appendChild(element);display=getComputedStyle(element,"").getPropertyValue("display");element.parentNode.removeChild(element);display=="none"&&(display="block");elementDisplay[nodeName]=display}return elementDisplay[nodeName]}function children(element){return"children" in element?slice.call(element.children):$.map(element.childNodes,function(node){if(node.nodeType==1){return node}})}zepto.fragment=function(html,name,properties){var dom,nodes,container;if(singleTagRE.test(html)){dom=$(document.createElement(RegExp.$1))}if(!dom){if(html.replace){html=html.replace(tagExpanderRE,"<$1></$2>")}if(name===undefined){name=fragmentRE.test(html)&&RegExp.$1}if(!(name in containers)){name="*"}container=containers[name];container.innerHTML=""+html;dom=$.each(slice.call(container.childNodes),function(){container.removeChild(this)})}if(isPlainObject(properties)){nodes=$(dom);$.each(properties,function(key,value){if(methodAttributes.indexOf(key)>-1){nodes[key](value)}else{nodes.attr(key,value)}})}return dom};zepto.Z=function(dom,selector){dom=dom||[];dom.__proto__=$.fn;dom.selector=selector||"";return dom};zepto.isZ=function(object){return object instanceof zepto.Z};zepto.init=function(selector,context){var dom;if(!selector){return zepto.Z()}else{if(typeof selector=="string"){selector=selector.trim();if(selector[0]=="<"&&fragmentRE.test(selector)){dom=zepto.fragment(selector,RegExp.$1,context),selector=null}else{if(context!==undefined){return $(context).find(selector)}else{dom=zepto.qsa(document,selector)}}}else{if(isFunction(selector)){return $(document).ready(selector)
}else{if(zepto.isZ(selector)){return selector}else{if(isArray(selector)){dom=compact(selector)}else{if(isObject(selector)){dom=[selector],selector=null}else{if(fragmentRE.test(selector)){dom=zepto.fragment(selector.trim(),RegExp.$1,context),selector=null}else{if(context!==undefined){return $(context).find(selector)}else{dom=zepto.qsa(document,selector)}}}}}}}}return zepto.Z(dom,selector)};$=function(selector,context){return zepto.init(selector,context)};function extend(target,source,deep){for(key in source){if(deep&&(isPlainObject(source[key])||isArray(source[key]))){if(isPlainObject(source[key])&&!isPlainObject(target[key])){target[key]={}}if(isArray(source[key])&&!isArray(target[key])){target[key]=[]}extend(target[key],source[key],deep)}else{if(source[key]!==undefined){target[key]=source[key]}}}}$.extend=function(target){var deep,args=slice.call(arguments,1);if(typeof target=="boolean"){deep=target;target=args.shift()}args.forEach(function(arg){extend(target,arg,deep)});return target};zepto.qsa=function(element,selector){var found,maybeID=selector[0]=="#",maybeClass=!maybeID&&selector[0]==".",nameOnly=maybeID||maybeClass?selector.slice(1):selector,isSimple=simpleSelectorRE.test(nameOnly);return(isDocument(element)&&isSimple&&maybeID)?((found=element.getElementById(nameOnly))?[found]:[]):(element.nodeType!==1&&element.nodeType!==9)?[]:slice.call(isSimple&&!maybeID?maybeClass?element.getElementsByClassName(nameOnly):element.getElementsByTagName(selector):element.querySelectorAll(selector))};function filtered(nodes,selector){return selector==null?$(nodes):$(nodes).filter(selector)}$.contains=function(parent,node){return parent!==node&&parent.contains(node)};function funcArg(context,arg,idx,payload){return isFunction(arg)?arg.call(context,idx,payload):arg}function setAttribute(node,name,value){value==null?node.removeAttribute(name):node.setAttribute(name,value)}function className(node,value){var klass=node.className,svg=klass&&klass.baseVal!==undefined;if(value===undefined){return svg?klass.baseVal:klass}svg?(klass.baseVal=value):(node.className=value)}function deserializeValue(value){var num;try{return value?value=="true"||(value=="false"?false:value=="null"?null:!/^0/.test(value)&&!isNaN(num=Number(value))?num:/^[\[\{]/.test(value)?$.parseJSON(value):value):value}catch(e){return value}}$.type=type;$.isFunction=isFunction;$.isWindow=isWindow;$.isArray=isArray;$.isPlainObject=isPlainObject;$.isEmptyObject=function(obj){var name;for(name in obj){return false}return true};$.inArray=function(elem,array,i){return emptyArray.indexOf.call(array,elem,i)};$.camelCase=camelize;$.trim=function(str){return str==null?"":String.prototype.trim.call(str)};$.uuid=0;$.support={};$.expr={};$.map=function(elements,callback){var value,values=[],i,key;if(likeArray(elements)){for(i=0;i<elements.length;i++){value=callback(elements[i],i);if(value!=null){values.push(value)}}}else{for(key in elements){value=callback(elements[key],key);if(value!=null){values.push(value)}}}return flatten(values)};$.each=function(elements,callback){var i,key;if(likeArray(elements)){for(i=0;i<elements.length;i++){if(callback.call(elements[i],i,elements[i])===false){return elements}}}else{for(key in elements){if(callback.call(elements[key],key,elements[key])===false){return elements}}}return elements};$.grep=function(elements,callback){return filter.call(elements,callback)};if(window.JSON){$.parseJSON=JSON.parse}$.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});$.fn={forEach:emptyArray.forEach,reduce:emptyArray.reduce,push:emptyArray.push,sort:emptyArray.sort,indexOf:emptyArray.indexOf,concat:emptyArray.concat,map:function(fn){return $($.map(this,function(el,i){return fn.call(el,i,el)}))},slice:function(){return $(slice.apply(this,arguments))},ready:function(callback){if(readyRE.test(document.readyState)&&document.body){callback($)}else{document.addEventListener("DOMContentLoaded",function(){callback($)},false)}return this},get:function(idx){return idx===undefined?slice.call(this):this[idx>=0?idx:idx+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){if(this.parentNode!=null){this.parentNode.removeChild(this)}})},each:function(callback){emptyArray.every.call(this,function(el,idx){return callback.call(el,idx,el)!==false});return this},filter:function(selector){if(isFunction(selector)){return this.not(this.not(selector))}return $(filter.call(this,function(element){return zepto.matches(element,selector)}))},add:function(selector,context){return $(uniq(this.concat($(selector,context))))},is:function(selector){return this.length>0&&zepto.matches(this[0],selector)},not:function(selector){var nodes=[];if(isFunction(selector)&&selector.call!==undefined){this.each(function(idx){if(!selector.call(this,idx)){nodes.push(this)}})}else{var excludes=typeof selector=="string"?this.filter(selector):(likeArray(selector)&&isFunction(selector.item))?slice.call(selector):$(selector);
this.forEach(function(el){if(excludes.indexOf(el)<0){nodes.push(el)}})}return $(nodes)},has:function(selector){return this.filter(function(){return isObject(selector)?$.contains(this,selector):$(this).find(selector).size()})},eq:function(idx){return idx===-1?this.slice(idx):this.slice(idx,+idx+1)},first:function(){var el=this[0];return el&&!isObject(el)?el:$(el)},last:function(){var el=this[this.length-1];return el&&!isObject(el)?el:$(el)},find:function(selector){var result,$this=this;if(typeof selector=="object"){result=$(selector).filter(function(){var node=this;return emptyArray.some.call($this,function(parent){return $.contains(parent,node)})})}else{if(this.length==1){result=$(zepto.qsa(this[0],selector))}else{result=this.map(function(){return zepto.qsa(this,selector)})}}return result},closest:function(selector,context){var node=this[0],collection=false;if(typeof selector=="object"){collection=$(selector)}while(node&&!(collection?collection.indexOf(node)>=0:zepto.matches(node,selector))){node=node!==context&&!isDocument(node)&&node.parentNode}return $(node)},parents:function(selector){var ancestors=[],nodes=this;while(nodes.length>0){nodes=$.map(nodes,function(node){if((node=node.parentNode)&&!isDocument(node)&&ancestors.indexOf(node)<0){ancestors.push(node);return node}})}return filtered(ancestors,selector)},parent:function(selector){return filtered(uniq(this.pluck("parentNode")),selector)},children:function(selector){return filtered(this.map(function(){return children(this)}),selector)},contents:function(){return this.map(function(){return slice.call(this.childNodes)})},siblings:function(selector){return filtered(this.map(function(i,el){return filter.call(children(el.parentNode),function(child){return child!==el})}),selector)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(property){return $.map(this,function(el){return el[property]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display="");if(getComputedStyle(this,"").getPropertyValue("display")=="none"){this.style.display=defaultDisplay(this.nodeName)}})},replaceWith:function(newContent){return this.before(newContent).remove()},wrap:function(structure){var func=isFunction(structure);if(this[0]&&!func){var dom=$(structure).get(0),clone=dom.parentNode||this.length>1}return this.each(function(index){$(this).wrapAll(func?structure.call(this,index):clone?dom.cloneNode(true):dom)})},wrapAll:function(structure){if(this[0]){$(this[0]).before(structure=$(structure));var children;while((children=structure.children()).length){structure=children.first()}$(structure).append(this)}return this},wrapInner:function(structure){var func=isFunction(structure);return this.each(function(index){var self=$(this),contents=self.contents(),dom=func?structure.call(this,index):structure;contents.length?contents.wrapAll(dom):self.append(dom)})},unwrap:function(){this.parent().each(function(){$(this).replaceWith($(this).children())});return this},clone:function(){return this.map(function(){return this.cloneNode(true)})},hide:function(){return this.css("display","none")},toggle:function(setting){return this.each(function(){var el=$(this);(setting===undefined?el.css("display")=="none":setting)?el.show():el.hide()})},prev:function(selector){return $(this.pluck("previousElementSibling")).filter(selector||"*")},next:function(selector){return $(this.pluck("nextElementSibling")).filter(selector||"*")},html:function(html){return arguments.length===0?(this.length>0?this[0].innerHTML:null):this.each(function(idx){var originHtml=this.innerHTML;$(this).empty().append(funcArg(this,html,idx,originHtml))})},text:function(text){return arguments.length===0?(this.length>0?this[0].textContent:null):this.each(function(){this.textContent=(text===undefined)?"":""+text})},attr:function(name,value){var result;return(typeof name=="string"&&value===undefined)?(this.length==0||this[0].nodeType!==1?undefined:(name=="value"&&this[0].nodeName=="INPUT")?this.val():(!(result=this[0].getAttribute(name))&&name in this[0])?this[0][name]:result):this.each(function(idx){if(this.nodeType!==1){return}if(isObject(name)){for(key in name){setAttribute(this,key,name[key])}}else{setAttribute(this,name,funcArg(this,value,idx,this.getAttribute(name)))}})},removeAttr:function(name){return this.each(function(){this.nodeType===1&&setAttribute(this,name)})},prop:function(name,value){name=propMap[name]||name;return(value===undefined)?(this[0]&&this[0][name]):this.each(function(idx){this[name]=funcArg(this,value,idx,this[name])})},data:function(name,value){var data=this.attr("data-"+name.replace(capitalRE,"-$1").toLowerCase(),value);return data!==null?deserializeValue(data):undefined},val:function(value){return arguments.length===0?(this[0]&&(this[0].multiple?$(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)):this.each(function(idx){this.value=funcArg(this,value,idx,this.value)})},offset:function(coordinates){if(coordinates){return this.each(function(index){var $this=$(this),coords=funcArg(this,coordinates,index,$this.offset()),parentOffset=$this.offsetParent().offset(),props={top:coords.top-parentOffset.top,left:coords.left-parentOffset.left};
if($this.css("position")=="static"){props["position"]="relative"}$this.css(props)})}if(this.length==0){return null}var obj=this[0].getBoundingClientRect();return{left:obj.left+window.pageXOffset,top:obj.top+window.pageYOffset,width:Math.round(obj.width),height:Math.round(obj.height)}},css:function(property,value){if(arguments.length<2){var element=this[0],computedStyle=getComputedStyle(element,"");if(!element){return}if(typeof property=="string"){return element.style[camelize(property)]||computedStyle.getPropertyValue(property)}else{if(isArray(property)){var props={};$.each(isArray(property)?property:[property],function(_,prop){props[prop]=(element.style[camelize(prop)]||computedStyle.getPropertyValue(prop))});return props}}}var css="";if(type(property)=="string"){if(!value&&value!==0){this.each(function(){this.style.removeProperty(dasherize(property))})}else{css=dasherize(property)+":"+maybeAddPx(property,value)}}else{for(key in property){if(!property[key]&&property[key]!==0){this.each(function(){this.style.removeProperty(dasherize(key))})}else{css+=dasherize(key)+":"+maybeAddPx(key,property[key])+";"}}}return this.each(function(){this.style.cssText+=";"+css})},index:function(element){return element?this.indexOf($(element)[0]):this.parent().children().indexOf(this[0])},hasClass:function(name){if(!name){return false}return emptyArray.some.call(this,function(el){return this.test(className(el))},classRE(name))},addClass:function(name){if(!name){return this}return this.each(function(idx){classList=[];var cls=className(this),newName=funcArg(this,name,idx,cls);newName.split(/\s+/g).forEach(function(klass){if(!$(this).hasClass(klass)){classList.push(klass)}},this);classList.length&&className(this,cls+(cls?" ":"")+classList.join(" "))})},removeClass:function(name){return this.each(function(idx){if(name===undefined){return className(this,"")}classList=className(this);funcArg(this,name,idx,classList).split(/\s+/g).forEach(function(klass){classList=classList.replace(classRE(klass)," ")});className(this,classList.trim())})},toggleClass:function(name,when){if(!name){return this}return this.each(function(idx){var $this=$(this),names=funcArg(this,name,idx,className(this));names.split(/\s+/g).forEach(function(klass){(when===undefined?!$this.hasClass(klass):when)?$this.addClass(klass):$this.removeClass(klass)})})},scrollTop:function(value){if(!this.length){return}var hasScrollTop="scrollTop" in this[0];if(value===undefined){return hasScrollTop?this[0].scrollTop:this[0].pageYOffset}return this.each(hasScrollTop?function(){this.scrollTop=value}:function(){this.scrollTo(this.scrollX,value)})},scrollLeft:function(value){if(!this.length){return}var hasScrollLeft="scrollLeft" in this[0];if(value===undefined){return hasScrollLeft?this[0].scrollLeft:this[0].pageXOffset}return this.each(hasScrollLeft?function(){this.scrollLeft=value}:function(){this.scrollTo(value,this.scrollY)})},position:function(){if(!this.length){return}var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rootNodeRE.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat($(elem).css("margin-top"))||0;offset.left-=parseFloat($(elem).css("margin-left"))||0;parentOffset.top+=parseFloat($(offsetParent[0]).css("border-top-width"))||0;parentOffset.left+=parseFloat($(offsetParent[0]).css("border-left-width"))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},offsetParent:function(){return this.map(function(){var parent=this.offsetParent||document.body;while(parent&&!rootNodeRE.test(parent.nodeName)&&$(parent).css("position")=="static"){parent=parent.offsetParent}return parent})}};$.fn.detach=$.fn.remove;["width","height"].forEach(function(dimension){var dimensionProperty=dimension.replace(/./,function(m){return m[0].toUpperCase()});$.fn[dimension]=function(value){var offset,el=this[0];if(value===undefined){return isWindow(el)?el["inner"+dimensionProperty]:isDocument(el)?el.documentElement["scroll"+dimensionProperty]:(offset=this.offset())&&offset[dimension]}else{return this.each(function(idx){el=$(this);el.css(dimension,funcArg(this,value,idx,el[dimension]()))})}}});function traverseNode(node,fun){fun(node);for(var key in node.childNodes){traverseNode(node.childNodes[key],fun)}}adjacencyOperators.forEach(function(operator,operatorIndex){var inside=operatorIndex%2;$.fn[operator]=function(){var argType,nodes=$.map(arguments,function(arg){argType=type(arg);return argType=="object"||argType=="array"||arg==null?arg:zepto.fragment(arg)}),parent,copyByClone=this.length>1;if(nodes.length<1){return this}return this.each(function(_,target){parent=inside?target:target.parentNode;target=operatorIndex==0?target.nextSibling:operatorIndex==1?target.firstChild:operatorIndex==2?target:null;nodes.forEach(function(node){if(copyByClone){node=node.cloneNode(true)}else{if(!parent){return $(node).remove()}}traverseNode(parent.insertBefore(node,target),function(el){if(el.nodeName!=null&&el.nodeName.toUpperCase()==="SCRIPT"&&(!el.type||el.type==="text/javascript")&&!el.src){window["eval"].call(window,el.innerHTML)
}})})})};$.fn[inside?operator+"To":"insert"+(operatorIndex?"Before":"After")]=function(html){$(html)[operator](this);return this}});zepto.Z.prototype=$.fn;zepto.uniq=uniq;zepto.deserializeValue=deserializeValue;$.zepto=zepto;var jsonpID=0,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;function triggerAndReturn(context,eventName,data){var event=$.Event(eventName);$(context).trigger(event,data);return !event.isDefaultPrevented()}function triggerGlobal(settings,context,eventName,data){if(settings.global){return triggerAndReturn(context||document,eventName,data)}}$.active=0;function ajaxStart(settings){if(settings.global&&$.active++===0){triggerGlobal(settings,null,"ajaxStart")}}function ajaxStop(settings){if(settings.global&&!(--$.active)){triggerGlobal(settings,null,"ajaxStop")}}function ajaxBeforeSend(xhr,settings){var context=settings.context;if(settings.beforeSend.call(context,xhr,settings)===false||triggerGlobal(settings,context,"ajaxBeforeSend",[xhr,settings])===false){return false}triggerGlobal(settings,context,"ajaxSend",[xhr,settings])}function ajaxSuccess(data,xhr,settings,deferred){var context=settings.context,status="success";settings.success.call(context,data,status,xhr,deferred);triggerGlobal(settings,context,"ajaxSuccess",[xhr,settings,data]);ajaxComplete(status,xhr,settings)}function ajaxError(error,type,xhr,settings,deferred){var context=settings.context;settings.error.call(context,xhr,type,error,deferred);triggerGlobal(settings,context,"ajaxError",[xhr,settings,error||type]);ajaxComplete(type,xhr,settings)}function ajaxComplete(status,xhr,settings){var context=settings.context;settings.complete.call(context,xhr,status);triggerGlobal(settings,context,"ajaxComplete",[xhr,settings]);ajaxStop(settings)}function empty(){}$.ajaxJSONP=function(options,deferred){if(!("type" in options)){return $.ajax(options)}var _callbackName=options.jsonpCallback,callbackName=($.isFunction(_callbackName)?_callbackName():_callbackName)||("jsonp"+(++jsonpID)),script=document.createElement("script"),originalCallback=window[callbackName],responseData,abort=function(errorType){$(script).triggerHandler("error",errorType||"abort")},xhr={abort:abort},abortTimeout;script.charset=options.charset||"utf-8";if(deferred){deferred.promise(xhr)}$(script).on("load error",function(e,errorType){clearTimeout(abortTimeout);$(script).off().remove();if(e.type=="error"||!responseData){ajaxError(null,errorType||"error",xhr,options,deferred)}else{ajaxSuccess(responseData[0],xhr,options,deferred)}window[callbackName]=originalCallback;if(responseData&&$.isFunction(originalCallback)){originalCallback(responseData[0])}originalCallback=responseData=undefined});if(ajaxBeforeSend(xhr,options)===false){abort("abort");return xhr}window[callbackName]=function(){responseData=arguments};script.src=options.url.replace(/=\?/,"="+callbackName);document.head.appendChild(script);if(options.timeout>0){abortTimeout=setTimeout(function(){abort("timeout")},options.timeout)}return xhr};$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:true,xhr:function(){return new window.XMLHttpRequest()},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:false,timeout:0,processData:true,cache:true};function mimeToDataType(mime){if(mime){mime=mime.split(";",2)[0]}return mime&&(mime==htmlType?"html":mime==jsonType?"json":scriptTypeRE.test(mime)?"script":xmlTypeRE.test(mime)&&"xml")||"text"}function appendQuery(url,query){if(query==""){return url}return(url+"&"+query).replace(/[&?]{1,2}/,"?")}function serializeData(options){if(options.processData&&options.data&&$.type(options.data)!="string"){options.data=$.param(options.data,options.traditional)}if(options.data&&(!options.type||options.type.toUpperCase()=="GET")){options.url=appendQuery(options.url,options.data),options.data=undefined}}$.ajax=function(options){var settings=$.extend({},options||{}),deferred=$.Deferred&&$.Deferred();for(key in $.ajaxSettings){if(settings[key]===undefined){settings[key]=$.ajaxSettings[key]}}ajaxStart(settings);if(!settings.crossDomain){settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host}if(!settings.url){settings.url=window.location.toString()}serializeData(settings);if(settings.cache===false){settings.url=appendQuery(settings.url,"_="+Date.now())}var dataType=settings.dataType,hasPlaceholder=/=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder){if(!hasPlaceholder){settings.url=appendQuery(settings.url,settings.jsonp?(settings.jsonp+"=?"):settings.jsonp===false?"":"callback=?")}return $.ajaxJSONP(settings,deferred)}var mime=settings.accepts[dataType],headers={},setHeader=function(name,value){headers[name.toLowerCase()]=[name,value]
},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),nativeSetHeader=xhr.setRequestHeader,abortTimeout;if(deferred){deferred.promise(xhr)}if(!settings.crossDomain){setHeader("X-Requested-With","XMLHttpRequest")}setHeader("Accept",mime||"*/*");if(mime=settings.mimeType||mime){if(mime.indexOf(",")>-1){mime=mime.split(",",2)[0]}xhr.overrideMimeType&&xhr.overrideMimeType(mime)}if(settings.contentType||(settings.contentType!==false&&settings.data&&settings.type.toUpperCase()!="GET")){setHeader("Content-Type",settings.contentType||"application/x-www-form-urlencoded")}if(settings.headers){for(name in settings.headers){setHeader(name,settings.headers[name])}}xhr.setRequestHeader=setHeader;xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty;clearTimeout(abortTimeout);var result,error=false;if((xhr.status>=200&&xhr.status<300)||xhr.status==304||(xhr.status==0&&protocol=="file:")){dataType=dataType||mimeToDataType(settings.mimeType||xhr.getResponseHeader("content-type"));result=xhr.responseText;try{if(dataType=="script"){(1,eval)(result)}else{if(dataType=="xml"){result=xhr.responseXML}else{if(dataType=="json"){result=blankRE.test(result)?null:$.parseJSON(result)}}}}catch(e){error=e}if(error){ajaxError(error,"parsererror",xhr,settings,deferred)}else{ajaxSuccess(result,xhr,settings,deferred)}}else{if(!xhr.status&&(!xhr.onerror||!xhr.onabort)){ajaxError(null,"xhr-1.0-error",xhr,settings)}else{if(xhr.status){ajaxError(null,"error",xhr,settings)}}}}};xhr.hasOwnProperty("onerror")&&(xhr.onerror=function(){ajaxError(null,"onerror",xhr,settings)});xhr.hasOwnProperty("onabort")&&(xhr.onabort=function(){!xhr.isTimeout&&ajaxError(null,"onabort",xhr,settings)});if(ajaxBeforeSend(xhr,settings)===false){xhr.abort();ajaxError(null,"abort",xhr,settings,deferred);return xhr}if(settings.xhrFields){for(name in settings.xhrFields){xhr[name]=settings.xhrFields[name]}}var async="async" in settings?settings.async:true;xhr.open(settings.type,settings.url,async,settings.username,settings.password);for(name in headers){nativeSetHeader.apply(xhr,headers[name])}if(settings.timeout>0){abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty;xhr.abort();ajaxError(null,"timeout",xhr,settings,deferred)},settings.timeout)}xhr.withCredentials=true;xhr.send(settings.data?settings.data:null);return xhr};function parseArguments(url,data,success,dataType){var hasData=!$.isFunction(data);return{url:url,data:hasData?data:undefined,success:!hasData?data:$.isFunction(success)?success:undefined,dataType:hasData?dataType||success:success}}$.get=function(url,data,success,dataType){return $.ajax(parseArguments.apply(null,arguments))};$.post=function(url,data,success,dataType){var options=parseArguments.apply(null,arguments);options.type="POST";return $.ajax(options)};$.getJSON=function(url,data,success){var options=parseArguments.apply(null,arguments);options.dataType="json";return $.ajax(options)};$.fn.load=function(url,data,success){if(!this.length){return this}var self=this,parts=url.split(/\s/),selector,options=parseArguments(url,data,success),callback=options.success;if(parts.length>1){options.url=parts[0],selector=parts[1]}options.success=function(response){self.html(selector?$("<div>").html(response.replace(rscript,"")).find(selector):response);callback&&callback.apply(self,arguments)};$.ajax(options);return this};var escape=encodeURIComponent;function serialize(params,obj,traditional,scope){var type,array=$.isArray(obj),hash=$.isPlainObject(obj);$.each(obj,function(key,value){type=$.type(value);if(scope){key=traditional?scope:scope+"["+(hash||type=="object"||type=="array"?key:"")+"]"}if(!scope&&array){params.add(value.name,value.value)}else{if(type=="array"||(!traditional&&type=="object")){serialize(params,value,traditional,key)}else{params.add(key,value)}}})}$.param=function(obj,traditional){var params=[];params.add=function(k,v){this.push(escape(k)+"="+escape(v))};serialize(params,obj,traditional);return params.join("&").replace(/%20/g,"+")};$.Callbacks=function(options){options=$.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;++firingIndex){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break}}firing=false;if(list){if(stack){stack.length&&fire(stack.shift())}else{if(memory){list.length=0}else{Callbacks.disable()}}}},Callbacks={add:function(){if(list){var start=list.length,add=function(args){$.each(args,function(_,arg){if(typeof arg==="function"){if(!options.unique||!Callbacks.has(arg)){list.push(arg)}}else{if(arg&&arg.length&&typeof arg!=="string"){add(arg)}}})};add(arguments);if(firing){firingLength=list.length}else{if(memory){firingStart=start;fire(memory)}}}return this},remove:function(){if(list){$.each(arguments,function(_,arg){var index;
while((index=$.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){--firingLength}if(index<=firingIndex){--firingIndex}}}})}return this},has:function(fn){return !!(list&&(fn?$.inArray(fn,list)>-1:list.length))},empty:function(){firingLength=list.length=0;return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return !list},lock:function(){stack=undefined;if(!memory){Callbacks.disable()}return this},locked:function(){return !stack},fireWith:function(context,args){if(list&&(!fired||stack)){args=args||[];args=[context,args.slice?args.slice():args];if(firing){stack.push(args)}else{fire(args)}}return this},fire:function(){return Callbacks.fireWith(this,arguments)},fired:function(){return !!fired}};return Callbacks};var data={},dataAttr=$.fn.data,camelize=$.camelCase,exp=$.expando="Zepto"+(+new Date()),emptyArray=[];function getData(node,name){var id=node[exp],store=id&&data[id];if(name===undefined){return store||setData(node)}else{if(store){if(name in store){return store[name]}var camelName=camelize(name);if(camelName in store){return store[camelName]}}return dataAttr.call($(node),name)}}function setData(node,name,value){var id=node[exp]||(node[exp]=++$.uuid),store=data[id]||(data[id]=attributeData(node));if(name!==undefined){store[camelize(name)]=value}return store}function attributeData(node){var store={};$.each(node.attributes||emptyArray,function(i,attr){if(attr.name.indexOf("data-")==0){store[camelize(attr.name.replace("data-",""))]=$.zepto.deserializeValue(attr.value)}});return store}$.fn.data=function(name,value){return value===undefined?$.isPlainObject(name)?this.each(function(i,node){$.each(name,function(key,value){setData(node,key,value)})}):this.length==0?undefined:getData(this[0],name):this.each(function(){setData(this,name,value)})};$.fn.removeData=function(names){if(typeof names=="string"){names=names.split(/\s+/)}return this.each(function(){var id=this[exp],store=id&&data[id];if(store){$.each(names||store,function(key){delete store[names?camelize(this):key]})}})};["remove","empty"].forEach(function(methodName){var origFn=$.fn[methodName];$.fn[methodName]=function(){var elements=this.find("*");if(methodName==="remove"){elements=elements.add(this)}elements.removeData();return origFn.call(this)}});var slice=Array.prototype.slice;function Deferred(func){var tuples=[["resolve","done",$.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",$.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",$.Callbacks({memory:1})]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return Deferred(function(defer){$.each(tuples,function(i,tuple){var fn=$.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&$.isFunction(returned.promise)){returned.promise().done(defer.resolve).fail(defer.reject).progress(defer.notify)}else{var context=this===promise?defer.promise():this,values=fn?[returned]:arguments;defer[tuple[0]+"With"](context,values)}})});fns=null}).promise()},promise:function(obj){return obj!=null?$.extend(obj,promise):promise}},deferred={};$.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred}$.when=function(sub){var resolveValues=slice.call(arguments),len=resolveValues.length,i=0,remain=len!==1||(sub&&$.isFunction(sub.promise))?len:0,deferred=remain===1?sub:Deferred(),progressValues,progressContexts,resolveContexts,updateFn=function(i,ctx,val){return function(value){ctx[i]=this;val[i]=arguments.length>1?slice.call(arguments):value;if(val===progressValues){deferred.notifyWith(ctx,val)}else{if(!(--remain)){deferred.resolveWith(ctx,val)}}}};if(len>1){progressValues=new Array(len);progressContexts=new Array(len);resolveContexts=new Array(len);for(;i<len;++i){if(resolveValues[i]&&$.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFn(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFn(i,progressContexts,progressValues))}else{--remain}}}if(!remain){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()};$.Deferred=Deferred;function detect(ua){var os=this.os={},browser=this.browser={},platform=this.platform={},webkit=ua.match(/WebKit\/([\d.]+)/),android=ua.match(/(Android)\s+([\d.]+)/),ipad=ua.match(/(iPad).*OS\s([\d_]+)/),iphone=!ipad&&ua.match(/(iPhone\sOS)\s([\d_]+)/),webos=ua.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),touchpad=webos&&ua.match(/TouchPad/),kindle=ua.match(/Kindle\/([\d.]+)/),silk=ua.match(/Silk\/([\d._]+)/),blackberry=ua.match(/(BlackBerry).*Version\/([\d.]+)/),bb10=ua.match(/(BB10).*Version\/([\d.]+)/),rimtabletos=ua.match(/(RIM\sTablet\sOS)\s([\d.]+)/),playbook=ua.match(/PlayBook/),chrome=ua.match(/Chrome\/([\d.]+)/)||ua.match(/CriOS\/([\d.]+)/),firefox=ua.match(/Firefox\/([\d.]+)/),safari=webkit&&ua.match(/Mobile\//)&&!chrome,webview=ua.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!chrome,ie=ua.match(/MSIE\s([\d.]+)/),ieMobile=ua.match(/IEMobile\/([\d.]+)/),wechat=ua.match(/MicroMessenger\/([\d\.]+)/),safariLike=ua.match(/Safari\/([\d.]+)/),uc=ua.match(/\s?UC|JUC|UCWEB/),qq=ua.match(/MQQBrowser\/([\d\.]+)/),xiaomi=ua.match(/MiuiBrowser\/([\d\.]+)/),music=ua.match(/qqmusic\/([\d\.]+)/i),qzone=ua.match(/qzone\/.+qz_([\d\.]+)/i),qmkege=ua.match(/qmkege\/([\d\.]+)/i),mqq=ua.match(/QQ\/([\d\.]+)/);
if(browser.webkit=!!webkit){browser.version=webkit[1]}if(android){os.android=true,os.version=android[2]}if(iphone){os.ios=os.iphone=true,os.version=iphone[2].replace(/_/g,".")}if(ipad){os.ios=os.ipad=true,os.version=ipad[2].replace(/_/g,".")}if(webos){os.webos=true,os.version=webos[2]}if(touchpad){os.touchpad=true}if(blackberry){os.blackberry=true,os.version=blackberry[2]}if(bb10){os.bb10=true,os.version=bb10[2]}if(rimtabletos){os.rimtabletos=true,os.version=rimtabletos[2]}if(playbook){browser.playbook=true}if(kindle){os.kindle=true,os.version=kindle[1]}if(silk){browser.silk=true,browser.version=silk[1]}if(!silk&&os.android&&ua.match(/Kindle Fire/)){browser.silk=true}if(chrome){browser.chrome=true,browser.version=chrome[1]}if(firefox){browser.firefox=true,browser.version=firefox[1]}if(ie){browser.ie=true,browser.version=ie[1]}if(ieMobile){browser.ie=true;browser.ieMobile=true,browser.version=ieMobile[1]}if(safari&&(ua.match(/Safari/)||!!os.ios)){browser.safari=true}if(webview){browser.webview=true}if(wechat){browser.wechat=true,browser.version=wechat[1]}if(uc){browser.uc=true,browser.version="8.6";var webkitVersion=0;var sua=navigator.userAgent;var t=sua.match(/AppleWebKit\/([\w\._]+)/);if(t){webkitVersion=t[1]}if(["530","530+"].indexOf(webkitVersion)>=0){browser.version="8.4"}}if(qq){browser.qq=true;var v=qq[1]||"4.5";if(v.indexOf(".")<0){v=v[0]+"."+v.substring(1)}browser.version=v}if(xiaomi){browser.xiaomi=true;browser.version=xiaomi[1]}if(safariLike&&!qq&&!uc&&!wechat&&!chrome&&!xiaomi){browser.safari=true}if(music){platform.music=true;platform.version=music[1]}else{if(wechat){platform.wechat=true;platform.version=wechat[1]}else{if(qzone){platform.qzone=true;platform.version=qzone[1]}else{if(mqq){platform.qq=true;platform.version=mqq[1]}else{if(qmkege){platform.qmkege=true;platform.version=qmkege[1]}}}}}os.tablet=!!(ipad||playbook||(android&&!ua.match(/Mobile/))||(firefox&&ua.match(/Tablet/)));os.phone=!!(!os.tablet&&(android||iphone||webos||blackberry||bb10||(chrome&&ua.match(/Android/))||(chrome&&ua.match(/CriOS\/([\d.]+)/))||(firefox&&ua.match(/Mobile/))));os.android&&$(document.body).addClass("os-android")}detect.call($,navigator.userAgent);$.__detect=detect;var $$=$.zepto.qsa,handlers={},_zid=1,specialEvents={},hover={mouseenter:"mouseover",mouseleave:"mouseout"};specialEvents.click=specialEvents.mousedown=specialEvents.mouseup=specialEvents.mousemove="MouseEvents";function eventFix(type){if($.browser.wechat){var version=parseFloat($.browser.version);if(version>=4.2&&version<=4.5){type=type.toLowerCase();if((type.indexOf("tap")>=0||type.indexOf("swipe")>=0)&&type.indexOf("weixin-")==-1){type="weixin-"+type}}}return type}function zid(element){return element._zid||(element._zid=_zid++)}function findHandlers(element,event,fn,selector){event=parse(event);if(event.ns){var matcher=matcherFor(event.ns)}return(handlers[zid(element)]||[]).filter(function(handler){return handler&&(!event.e||handler.e==event.e)&&(!event.ns||matcher.test(handler.ns))&&(!fn||zid(handler.fn)===zid(fn))&&(!selector||handler.sel==selector)})}function parse(event){var parts=(""+event).split(".");return{e:parts[0],ns:parts.slice(1).sort().join(" ")}}function matcherFor(ns){return new RegExp("(?:^| )"+ns.replace(" "," .* ?")+"(?: |$)")}function eachEvent(events,fn,iterator){if($.type(events)!="string"){$.each(events,iterator)}else{events.split(/\s/).forEach(function(type){iterator(type,fn)})}}function eventCapture(handler,captureSetting){return handler.del&&(handler.e=="focus"||handler.e=="blur")||!!captureSetting}function realEvent(type){if($.browser.ie){if(type=="tap"){type="click"}}return eventFix(hover[type]||type)}function add(element,events,fn,selector,getDelegate,capture){var id=zid(element),set=(handlers[id]||(handlers[id]=[]));eachEvent(events,fn,function(event,fn){var handler=parse(event);handler.fn=fn;handler.sel=selector;if(handler.e in hover){fn=function(e){var related=e.relatedTarget;if(!related||(related!==this&&!$.contains(this,related))){return handler.fn.apply(this,arguments)}}}handler.del=getDelegate&&getDelegate(fn,event);var callback=handler.del||fn;handler.proxy=function(e){var result=callback.apply(element,[e].concat(e.data));if(result===false){e.preventDefault(),e.stopPropagation()}return result};handler.i=set.length;set.push(handler);element.addEventListener(realEvent(handler.e),handler.proxy,eventCapture(handler,capture))})}function remove(element,events,fn,selector,capture){var id=zid(element);eachEvent(events||"",fn,function(event,fn){findHandlers(element,event,fn,selector).forEach(function(handler){delete handlers[id][handler.i];element.removeEventListener(realEvent(handler.e),handler.proxy,eventCapture(handler,capture))})})}$.event={add:add,remove:remove};$.proxy=function(fn,context){if($.isFunction(fn)){var proxyFn=function(){return fn.apply(context,arguments)};proxyFn._zid=zid(fn);return proxyFn}else{if(typeof context=="string"){return $.proxy(fn[context],fn)}else{throw new TypeError("expected function")
}}};$.fn.bind=function(event,callback){return this.each(function(){add(this,event,callback)})};$.fn.unbind=function(event,callback){return this.each(function(){remove(this,event,callback)})};$.fn.one=function(event,callback){return this.each(function(i,element){add(this,event,callback,null,function(fn,type){return function(){var result=fn.apply(element,arguments);remove(element,type,fn);return result}})})};var returnTrue=function(){return true},returnFalse=function(){return false},ignoreProperties=/^([A-Z]|layer[XY]$)/,eventMethods={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function createProxy(event){var key,proxy={originalEvent:event};for(key in event){if(!ignoreProperties.test(key)&&event[key]!==undefined){proxy[key]=event[key]}}$.each(eventMethods,function(name,predicate){if(!event[name]){return}proxy[name]=function(){this[predicate]=returnTrue;return event[name].apply(event,arguments)};proxy[predicate]=returnFalse});return proxy}function fix(event){if(!("defaultPrevented" in event)){event.defaultPrevented=false;var prevent=event.preventDefault;event.preventDefault=function(){this.defaultPrevented=true;prevent.call(this)}}}var delegateEvent={};$.fn.delegate=function(selector,events,callback){var self=this;eachEvent(events,callback,function(event,callback){event=realEvent(event);if(!delegateEvent[event]){delegateEvent[event]=[];add(document.body,event,callback,selector,function(){return function(e){var evt=createProxy(e),match,node=e.target,dels=delegateEvent[e.type].slice(),result;hasDelegate:while(true){for(var i=0,data;data=dels[i];i++){if($.contains(data.element,node)){match=$.zepto.matches(node,data.selector)?node:null;if(match){data.match=match;evt=$.extend(evt,{currentTarget:match,liveFired:data.element});result=data.callback.apply(data.match,[evt].concat([].slice.call(arguments,1)));if(result===false||evt.returnValue===false){break hasDelegate}dels.splice(i,1);i--}}else{dels.splice(i,1);i--}}if(!dels.length||node!=null&&node.nodeType==node.DOCUMENT_NODE){break}if(!node){return null}node=node.parentNode}return result}})}self.each(function(i,element){delegateEvent[event].push({element:element,selector:selector,event:event,callback:callback})})});return this};$.fn.undelegate=function(selector,event,callback){return this.each(function(i,element){delegateEvent[event]&&(delegateEvent[event]=(delegateEvent[event]||[]).filter(function(data){return !(data.element==element&&(!selector||data.selector==selector)&&(!callback||data.callback==callback))}))})};$.fn.live=function(event,callback){$(document.body).delegate(this.selector,event,callback);return this};$.fn.die=function(event,callback){$(document.body).undelegate(this.selector,event,callback);return this};$.fn.on=function(event,selector,callback){return !selector||$.isFunction(selector)?this.bind(event,selector||callback):this.delegate(selector,event,callback)};$.fn.off=function(event,selector,callback){return !selector||$.isFunction(selector)?this.unbind(event,selector||callback):this.undelegate(selector,event,callback)};$.fn.trigger=function(event,data){if(typeof event=="string"||$.isPlainObject(event)){event=$.Event(event)}fix(event);event.data=data;return this.each(function(){if("dispatchEvent" in this){this.dispatchEvent(event)}})};$.fn.triggerHandler=function(event,data){var e,result;this.each(function(i,element){e=createProxy(typeof event=="string"?$.Event(event):event);e.data=data;e.target=element;$.each(findHandlers(element,event.type||event),function(i,handler){result=handler.proxy(e);if(e.isImmediatePropagationStopped()){return false}})});return result};("focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select keydown keypress keyup error").split(" ").forEach(function(event){$.fn[event]=function(callback){return callback?this.bind(event,callback):this.trigger(event)}});["focus","blur"].forEach(function(name){$.fn[name]=function(callback){if(callback){this.bind(name,callback)}else{this.each(function(){try{this[name]()}catch(e){}})}return this}});$.Event=function(type,props){if(typeof type!="string"){props=type,type=props.type}type=eventFix(type);var event=document.createEvent(specialEvents[type]||"Events"),bubbles=true;if(props){for(var name in props){(name=="bubbles")?(bubbles=!!props[name]):(event[name]=props[name])}}event.initEvent(type,bubbles,true,null,null,null,null,null,null,null,null,null,null,null,null);event.isDefaultPrevented=function(){return this.defaultPrevented};return event};$.cancelBubble=function(event){event.returnValue=false;if(event.stopPropagation){event.stopPropagation()}if(event.stopImmediatePropagation){event.stopImmediatePropagation()}return false};var prefix="",eventPrefix,endEventName,endAnimationName,vendors={Webkit:"webkit",Moz:"",O:"o"},document=window.document,testEl=document.createElement("div"),supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,transform,transitionProperty,transitionDuration,transitionTiming,transitionDelay,animationName,animationDuration,animationTiming,animationDelay,cssReset={};
function dasherize(str){return str.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function normalizeEvent(name){return eventPrefix?eventPrefix+name:name.toLowerCase()}$.each(vendors,function(vendor,event){if(testEl.style[vendor+"TransitionProperty"]!==undefined){prefix="-"+vendor.toLowerCase()+"-";eventPrefix=event;return false}});transform=prefix+"transform";cssReset[transitionProperty=prefix+"transition-property"]=cssReset[transitionDuration=prefix+"transition-duration"]=cssReset[transitionDelay=prefix+"transition-delay"]=cssReset[transitionTiming=prefix+"transition-timing-function"]=cssReset[animationName=prefix+"animation-name"]=cssReset[animationDuration=prefix+"animation-duration"]=cssReset[animationDelay=prefix+"animation-delay"]=cssReset[animationTiming=prefix+"animation-timing-function"]="";$.fx={off:(eventPrefix===undefined&&testEl.style.transitionProperty===undefined),speeds:{_default:400,fast:200,slow:600},cssPrefix:prefix,transitionEnd:normalizeEvent("TransitionEnd"),animationEnd:normalizeEvent("AnimationEnd")};$.fn.animate=function(properties,duration,ease,callback,delay){if($.isFunction(duration)){callback=duration,ease=undefined,duration=undefined}if($.isFunction(ease)){callback=ease,ease=undefined}if($.isPlainObject(duration)){ease=duration.easing,callback=duration.complete,delay=duration.delay,duration=duration.duration}if(duration){duration=(typeof duration=="number"?duration:($.fx.speeds[duration]||$.fx.speeds._default))/1000}if(delay){delay=parseFloat(delay)/1000}return this.anim(properties,duration,ease,callback,delay)};$.fn.anim=function(properties,duration,ease,callback,delay){var key,cssValues={},cssProperties,transforms="",that=this,wrappedCallback,endEvent=$.fx.transitionEnd,fired=false;if(duration===undefined){duration=$.fx.speeds._default/1000}if(delay===undefined){delay=0}if($.fx.off){duration=0}if(typeof properties=="string"){cssValues[animationName]=properties;cssValues[animationDuration]=duration+"s";cssValues[animationDelay]=delay+"s";cssValues[animationTiming]=(ease||"linear");endEvent=$.fx.animationEnd}else{cssProperties=[];for(key in properties){if(supportedTransforms.test(key)){transforms+=key+"("+properties[key]+") "}else{cssValues[key]=properties[key],cssProperties.push(dasherize(key))}}if(transforms){cssValues[transform]=transforms,cssProperties.push(transform)}if(duration>0&&typeof properties==="object"){cssValues[transitionProperty]=cssProperties.join(", ");cssValues[transitionDuration]=duration+"s";cssValues[transitionDelay]=delay+"s";cssValues[transitionTiming]=(ease||"linear")}}wrappedCallback=function(event){if(typeof event!=="undefined"){if(event.target!==event.currentTarget){return}$(event.target).unbind(endEvent,wrappedCallback)}else{$(this).unbind(endEvent,wrappedCallback)}fired=true;$(this).css(cssReset);callback&&callback.call(this)};if(duration>0){this.bind(endEvent,wrappedCallback);setTimeout(function(){if(fired){return}wrappedCallback.call(that)},(duration*1000)+25)}this.size()&&this.get(0).clientLeft;this.css(cssValues);if(duration<=0){setTimeout(function(){that.each(function(){wrappedCallback.call(this)})},0)}return this};testEl=null;var ghostClick={_coordinates:[],_failOnPrevent:["textarea","input"],mark:function(x,y,el){this._coordinates.push({x:x,y:y,el:el});window.setTimeout(function(){ghostClick.unmark()},1000)},unmark:function(){return this._coordinates.shift()},onMouseDown:function(event){ghostClick._coordinates.forEach(function(coordinate){var x=coordinate.x;var y=coordinate.y;var el=coordinate.el;var canPrevent=ghostClick._failOnPrevent.indexOf(event.target.nodeName.toLocaleLowerCase())<0;if(canPrevent&&el!=event.target&&Math.abs(event.clientX-x)<25&&Math.abs(window.scrollY+event.clientY-y)<25){event.stopPropagation();event.preventDefault();return false}})}};document.addEventListener("mousedown",ghostClick.onMouseDown,true);document.addEventListener("click",ghostClick.onMouseDown);var touch={},touchTimeout,tapTimeout,swipeTimeout,longTapDelay=750,longTapTimeout;function parentIfText(node){return"tagName" in node?node:node.parentNode}function swipeDirection(x1,x2,y1,y2){var xDelta=Math.abs(x1-x2),yDelta=Math.abs(y1-y2);return xDelta>=yDelta?(x1-x2>0?"Left":"Right"):(y1-y2>0?"Up":"Down")}function longTap(){longTapTimeout=null;if(touch.last&&touch.el){touch.el.trigger("longTap");touch={}}}function cancelLongTap(){if(longTapTimeout){clearTimeout(longTapTimeout)}longTapTimeout=null}function cancelAll(){if(touchTimeout){clearTimeout(touchTimeout)}if(tapTimeout){clearTimeout(tapTimeout)}if(swipeTimeout){clearTimeout(swipeTimeout)}if(longTapTimeout){clearTimeout(longTapTimeout)}touchTimeout=tapTimeout=swipeTimeout=longTapTimeout=null;touch={}}function hackIosClick(event){if(event&&event.target){event.target.onclick=null}}if(!window.__hasInitEvent){$(document).ready(function(){var now,delta;$(document.body).bind("touchstart",function(e){console.log("touch start zepto");now=Date.now();delta=now-(touch.last||now);touch.el=$(parentIfText(e.touches[0].target));
touchTimeout&&clearTimeout(touchTimeout);touch.x1=e.touches[0].pageX;touch.y1=e.touches[0].pageY;if(delta>0&&delta<=250){touch.isDoubleTap=true}touch.last=now;touch.isMove=false;longTapTimeout=setTimeout(longTap,longTapDelay);touch.x2=touch.y2=null}).bind("touchmove",function(e){cancelLongTap();touch.isMove=true;touch.x2=e.touches[0].pageX;touch.y2=e.touches[0].pageY;if(Math.abs(touch.x1-touch.x2)>30){e.preventDefault()}}).bind("touchend",function(e){cancelLongTap();if(!touch.el){return}ghostClick.mark(touch.x1,touch.y1,touch.el.get(0));var littleMove=false;if(touch.isMove&&(touch.x2&&Math.abs(touch.x1-touch.x2)<5)&&(touch.y2&&Math.abs(touch.y1-touch.y2)<5)){littleMove=true}if((touch.x2&&Math.abs(touch.x1-touch.x2)>30)||(touch.y2&&Math.abs(touch.y1-touch.y2)>30)){swipeTimeout=setTimeout(function(){if(touch.el){touch.el.trigger("swipe");touch.el.trigger("swipe"+(swipeDirection(touch.x1,touch.x2,touch.y1,touch.y2)));touch={}}},0)}else{if("last" in touch&&(!touch.isMove||littleMove)){tapTimeout=setTimeout(function(){var event=$.Event("tap");event.cancelTouch=cancelAll;if(touch.el){touch.el.trigger(event);if($.os.ios){if(touch.el.size()&&touch.el.get(0).onclick==null){touch.el.get(0).onclick=hackIosClick}}}if(touch.isDoubleTap&&touch.el){touch.el.trigger("doubleTap");touch={}}else{touchTimeout=setTimeout(function(){touchTimeout=null;if(touch.el){touch.el.trigger("singleTap");touch={}}},250)}},0)}}}).bind("touchcancel",cancelAll);$(window).bind("scroll",cancelAll)});window.__hasInitEvent=true}["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(m){$.fn[m]=function(callback){return this.bind(m,callback)}});window.$=window.Zepto=$;return $});
define("jpegencode",function(b,a,c){function d(o){var q=this;var G=Math.round;var O=Math.floor;var k=new Array(64);var N=new Array(64);var U=new Array(64);var ab=new Array(64);var E;var l;var u;var X;var M=new Array(65535);var p=new Array(65535);var S=new Array(64);var V=new Array(64);var m=[];var F=0;var e=7;var H=new Array(64);var h=new Array(64);var Y=new Array(64);var i=new Array(256);var I=new Array(2048);var D;var R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63];var j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];var f=[0,1,2,3,4,5,6,7,8,9,10,11];var C=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125];var w=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250];var B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];var ac=[0,1,2,3,4,5,6,7,8,9,10,11];var r=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119];var y=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function P(ak){var aj=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];for(var ai=0;ai<64;ai++){var an=O((aj[ai]*ak+50)/100);if(an<1){an=1}else{if(an>255){an=255}}k[R[ai]]=an}var al=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(var ah=0;ah<64;ah++){var am=O((al[ah]*ak+50)/100);if(am<1){am=1}else{if(am>255){am=255}}N[R[ah]]=am}var ag=[1,1.387039845,1.306562965,1.175875602,1,0.785694958,0.5411961,0.275899379];var af=0;for(var ao=0;ao<8;ao++){for(var ae=0;ae<8;ae++){U[af]=(1/(k[R[af]]*ag[ao]*ag[ae]*8));ab[af]=(1/(N[R[af]]*ag[ao]*ag[ae]*8));af++}}}function L(ai,aj){var ah=0;var ak=0;var ag=new Array();for(var ae=1;ae<=16;ae++){for(var af=1;af<=ai[ae];af++){ag[aj[ak]]=[];ag[aj[ak]][0]=ah;ag[aj[ak]][1]=ae;ak++;ah++}ah*=2}return ag}function aa(){E=L(j,f);l=L(B,ac);u=L(C,w);X=L(r,y)}function z(){var af=1;var ah=2;for(var ae=1;ae<=15;ae++){for(var ag=af;ag<ah;ag++){p[32767+ag]=ae;M[32767+ag]=[];M[32767+ag][1]=ae;M[32767+ag][0]=ag}for(var ai=-(ah-1);ai<=-af;ai++){p[32767+ai]=ae;M[32767+ai]=[];M[32767+ai][1]=ae;M[32767+ai][0]=ah-1+ai}af<<=1;ah<<=1}}function Z(){for(var ae=0;ae<256;ae++){I[ae]=19595*ae;I[(ae+256)>>0]=38470*ae;I[(ae+512)>>0]=7471*ae+32768;I[(ae+768)>>0]=-11059*ae;I[(ae+1024)>>0]=-21709*ae;I[(ae+1280)>>0]=32768*ae+8421375;I[(ae+1536)>>0]=-27439*ae;I[(ae+1792)>>0]=-5329*ae}}function ad(af){var ag=af[0];var ae=af[1]-1;while(ae>=0){if(ag&(1<<ae)){F|=(1<<e)}ae--;e--;if(e<0){if(F==255){v(255);v(0)}else{v(F)}e=7;F=0}}}function v(ae){m.push(i[ae])}function K(ae){v((ae>>8)&255);v((ae)&255)}function Q(a2,az){var aQ,aP,aO,aN,aM,aK,aJ,aH;var aT=0;var aV;var ay=8;var ar=64;for(aV=0;aV<ay;++aV){aQ=a2[aT];aP=a2[aT+1];aO=a2[aT+2];aN=a2[aT+3];aM=a2[aT+4];aK=a2[aT+5];aJ=a2[aT+6];aH=a2[aT+7];var a3=aQ+aH;var aS=aQ-aH;var a1=aP+aJ;var aU=aP-aJ;var a0=aO+aK;var aW=aO-aK;var aZ=aN+aM;var aX=aN-aM;var aw=a3+aZ;var at=a3-aZ;var av=a1+a0;var au=a1-a0;a2[aT]=aw+av;a2[aT+4]=aw-av;var aE=(au+at)*0.707106781;a2[aT+2]=at+aE;a2[aT+6]=at-aE;aw=aX+aW;av=aW+aU;au=aU+aS;var aA=(aw-au)*0.382683433;var aD=0.5411961*aw+aA;var aB=1.306562965*au+aA;var aC=av*0.707106781;var ao=aS+aC;var an=aS-aC;a2[aT+5]=an+aD;a2[aT+3]=an-aD;a2[aT+1]=ao+aB;a2[aT+7]=ao-aB;aT+=8}aT=0;for(aV=0;aV<ay;++aV){aQ=a2[aT];aP=a2[aT+8];aO=a2[aT+16];aN=a2[aT+24];aM=a2[aT+32];aK=a2[aT+40];aJ=a2[aT+48];aH=a2[aT+56];var aq=aQ+aH;var ax=aQ-aH;var al=aP+aJ;var aF=aP-aJ;var ai=aO+aK;var aI=aO-aK;var af=aN+aM;var aY=aN-aM;var ap=aq+af;var ae=aq-af;var ak=al+ai;var ah=al-ai;a2[aT]=ap+ak;a2[aT+32]=ap-ak;var am=(ah+ae)*0.707106781;a2[aT+16]=ae+am;a2[aT+48]=ae-am;ap=aY+aI;ak=aI+aF;ah=aF+ax;var aR=(ap-ah)*0.382683433;var aj=0.5411961*ap+aR;var a5=1.306562965*ah+aR;var ag=ak*0.707106781;var a4=ax+ag;var aG=ax-ag;
a2[aT+40]=aG+aj;a2[aT+24]=aG-aj;a2[aT+8]=a4+a5;a2[aT+56]=a4-a5;aT++}var aL;for(aV=0;aV<ar;++aV){aL=a2[aV]*az[aV];S[aV]=(aL>0)?((aL+0.5)|0):((aL-0.5)|0)}return S}function W(){K(65504);K(16);v(74);v(70);v(73);v(70);v(0);v(1);v(1);v(0);K(1);K(1);v(0);v(0)}function J(af,ae){K(65472);K(17);v(8);K(ae);K(af);v(3);v(1);v(17);v(0);v(2);v(17);v(1);v(3);v(17);v(1)}function x(){K(65499);K(132);v(0);for(var af=0;af<64;af++){v(k[af])}v(1);for(var ae=0;ae<64;ae++){v(N[ae])}}function t(){K(65476);K(418);v(0);for(var ai=0;ai<16;ai++){v(j[ai+1])}for(var ah=0;ah<=11;ah++){v(f[ah])}v(16);for(var ag=0;ag<16;ag++){v(C[ag+1])}for(var af=0;af<=161;af++){v(w[af])}v(1);for(var ae=0;ae<16;ae++){v(B[ae+1])}for(var al=0;al<=11;al++){v(ac[al])}v(17);for(var ak=0;ak<16;ak++){v(r[ak+1])}for(var aj=0;aj<=161;aj++){v(y[aj])}}function s(){K(65498);K(12);v(3);v(1);v(0);v(2);v(17);v(3);v(17);v(0);v(63);v(0)}function n(ai,ae,ao,au,at){var ak=at[0];var ag=at[240];var ah;var av=16;var al=63;var aj=64;var aw=Q(ai,ae);for(var ap=0;ap<aj;++ap){V[R[ap]]=aw[ap]}var ar=V[0]-ao;ao=V[0];if(ar==0){ad(au[0])}else{ah=32767+ar;ad(au[p[ah]]);ad(M[ah])}var af=63;for(;(af>0)&&(V[af]==0);af--){}if(af==0){ad(ak);return ao}var aq=1;var ay;while(aq<=af){var an=aq;for(;(V[aq]==0)&&(aq<=af);++aq){}var am=aq-an;if(am>=av){ay=am>>4;for(var ax=1;ax<=ay;++ax){ad(ag)}am=am&15}ah=32767+V[aq];ad(at[(am<<4)+p[ah]]);ad(M[ah]);aq++}if(af!=al){ad(ak)}return ao}function A(){var af=String.fromCharCode;for(var ae=0;ae<256;ae++){i[ae]=af(ae)}}this.encode=function(au,ao,aj){var ag=new Date().getTime();if(ao){g(ao)}m=new Array();F=0;e=7;K(65496);W();x();J(au.width,au.height);t();s();var ap=0;var aw=0;var at=0;F=0;e=7;this.encode.displayName="_encode_";var aA=au.data;var ay=au.width;var ar=au.height;var ax=ay*4;var af=ay*3;var an,am=0;var aq,az,aB;var ah,av,ai,al,ak;var ae=function(aF){if(aF>=ar){if(e>=0){var aC=[];aC[1]=e+1;aC[0]=(1<<(e+1))-1;ad(aC)}K(65497);var aD="data:image/jpeg;base64,"+btoa(m.join(""));m=[];var aE=new Date().getTime()-ag;aj(aD)}else{an=0;while(an<ax){ah=ax*aF+an;av=ah;ai=-1;al=0;for(ak=0;ak<64;ak++){al=ak>>3;ai=(ak&7)*4;av=ah+(al*ax)+ai;if(aF+al>=ar){av-=(ax*(aF+1+al-ar))}if(an+ai>=ax){av-=((an+ai)-ax+4)}aq=aA[av++];az=aA[av++];aB=aA[av++];H[ak]=((I[aq]+I[(az+256)>>0]+I[(aB+512)>>0])>>16)-128;h[ak]=((I[(aq+768)>>0]+I[(az+1024)>>0]+I[(aB+1280)>>0])>>16)-128;Y[ak]=((I[(aq+1280)>>0]+I[(az+1536)>>0]+I[(aB+1792)>>0])>>16)-128}ap=n(H,U,ap,E,u);aw=n(h,ab,aw,l,X);at=n(Y,ab,at,l,X);an+=32}setTimeout(function(){ae(aF+8)},10)}};ae(0)};function g(af){if(af<=0){af=1}if(af>100){af=100}if(D==af){return}var ae=0;if(af<50){ae=Math.floor(5000/af)}else{ae=Math.floor(200-af*2)}P(ae);D=af}function T(){var af=new Date().getTime();if(!o){o=50}A();aa();z();Z();g(o);var ae=new Date().getTime()-af}T()}return d});
define("jpegmeta",function(h,u,b){var i={};i.parseNum=function o(v,A,B,y){var x;var w;var z=(v===">");if(B===undefined){B=0}if(y===undefined){y=A.length-B}for(z?x=B:x=B+y-1;z?x<B+y:x>=B;z?x++:x--){w<<=8;w+=A.charCodeAt(x)}return w};i.parseSnum=function l(v,A,B,y){var x;var w;var C;var z=(v===">");if(B===undefined){B=0}if(y===undefined){y=A.length-B}for(z?x=B:x=B+y-1;z?x<B+y:x>=B;z?x++:x--){if(C===undefined){C=(A.charCodeAt(x)&128)===128}w<<=8;w+=C?~A.charCodeAt(x)&255:A.charCodeAt(x)}if(C){w+=1;w*=-1}return w};i.Rational=function e(v,w){this.num=v;this.den=w||1;return this};i.Rational.prototype.toString=function m(){if(this.num===0){return""+this.num}if(this.den===1){return""+this.num}if(this.num===1){return this.num+" / "+this.den}return this.num/this.den};i.Rational.prototype.asFloat=function c(){return this.num/this.den};i.MetaGroup=function t(w,v){this.fieldName=w;this.description=v;this.metaProps={};return this};i.MetaGroup.prototype._addProperty=function s(y,v,x){var w=new i.MetaProp(y,v,x);this[w.fieldName]=w;this.metaProps[w.fieldName]=w};i.MetaGroup.prototype.toString=function m(){return"[MetaGroup "+this.description+"]"};i.MetaProp=function r(x,v,w){this.fieldName=x;this.description=v;this.value=w;return this};i.MetaProp.prototype.toString=function m(){return""+this.value};i.JpegFile=function n(G,v){var E=this._SOS;this.metaGroups={};this._binary_data=G;this.filename=v;var F=0;var A=0;var x;var C;var w;var B;var y;var z;var D;if(this._binary_data.slice(0,2)!==this._SOI_MARKER){throw new Error("Doesn't look like a JPEG file. First two bytes are "+this._binary_data.charCodeAt(0)+","+this._binary_data.charCodeAt(1)+".")}F+=2;while(F<this._binary_data.length){x=this._binary_data.charCodeAt(F++);C=this._binary_data.charCodeAt(F++);A=F;if(x!=this._DELIM){break}if(C===E){break}y=i.parseNum(">",this._binary_data,F,2);F+=y;while(F<this._binary_data.length){x=this._binary_data.charCodeAt(F++);if(x==this._DELIM){w=this._binary_data.charCodeAt(F++);if(w!=0){F-=2;break}}}B=F-A;if(this._markers[C]){z=this._markers[C][0];D=this._markers[C][1]}else{z="UNKN";D=undefined}if(D){this[D](C,A+2)}}if(this.general===undefined){throw Error("Invalid JPEG file.")}return this};i.JpegFile.prototype.toString=function(){return"[JpegFile "+this.filename+" "+this.general.type+" "+this.general.pixelWidth+"x"+this.general.pixelHeight+" Depth: "+this.general.depth+"]"};i.JpegFile.prototype._SOI_MARKER="\xff\xd8";i.JpegFile.prototype._DELIM=255;i.JpegFile.prototype._EOI=217;i.JpegFile.prototype._SOS=218;i.JpegFile.prototype._sofHandler=function p(w,v){if(this.general!==undefined){throw Error("Unexpected multiple-frame image")}this._addMetaGroup("general","General");this.general._addProperty("depth","Depth",i.parseNum(">",this._binary_data,v,1));this.general._addProperty("pixelHeight","Pixel Height",i.parseNum(">",this._binary_data,v+1,2));this.general._addProperty("pixelWidth","Pixel Width",i.parseNum(">",this._binary_data,v+3,2));this.general._addProperty("type","Type",this._markers[w][2])};i.JpegFile.prototype._JFIF_IDENT="JFIF\x00";i.JpegFile.prototype._JFXX_IDENT="JFXX\x00";i.JpegFile.prototype._EXIF_IDENT="Exif\x00";i.JpegFile.prototype._types={1:["BYTE",1],2:["ASCII",1],3:["SHORT",2],4:["LONG",4],5:["RATIONAL",8],6:["SBYTE",1],7:["UNDEFINED",1],8:["SSHORT",2],9:["SLONG",4],10:["SRATIONAL",8],11:["FLOAT",4],12:["DOUBLE",8]};i.JpegFile.prototype._tifftags={256:["Image width","ImageWidth"],257:["Image height","ImageLength"],258:["Number of bits per component","BitsPerSample"],259:["Compression scheme","Compression",{1:"uncompressed",6:"JPEG compression"}],262:["Pixel composition","PhotmetricInerpretation",{2:"RGB",6:"YCbCr"}],274:["Orientation of image","Orientation",{1:"Normal",2:"Reverse?",3:"Upside-down",4:"Upside-down Reverse",5:"90 degree CW",6:"90 degree CW reverse",7:"90 degree CCW",8:"90 degree CCW reverse"}],277:["Number of components","SamplesPerPixel"],284:["Image data arrangement","PlanarConfiguration",{1:"chunky format",2:"planar format"}],530:["Subsampling ratio of Y to C","YCbCrSubSampling"],531:["Y and C positioning","YCbCrPositioning",{1:"centered",2:"co-sited"}],282:["X Resolution","XResolution"],283:["Y Resolution","YResolution"],296:["Resolution Unit","ResolutionUnit",{2:"inches",3:"centimeters"}],273:["Image data location","StripOffsets"],278:["Number of rows per strip","RowsPerStrip"],279:["Bytes per compressed strip","StripByteCounts"],513:["Offset to JPEG SOI","JPEGInterchangeFormat"],514:["Bytes of JPEG Data","JPEGInterchangeFormatLength"],301:["Transfer function","TransferFunction"],318:["White point chromaticity","WhitePoint"],319:["Chromaticities of primaries","PrimaryChromaticities"],529:["Color space transformation matrix coefficients","YCbCrCoefficients"],532:["Pair of black and white reference values","ReferenceBlackWhite"],306:["Date and time","DateTime"],270:["Image title","ImageDescription"],271:["Make","Make"],272:["Model","Model"],305:["Software","Software"],315:["Person who created the image","Artist"],316:["Host Computer","HostComputer"],33432:["Copyright holder","Copyright"],34665:["Exif tag","ExifIfdPointer"],34853:["GPS tag","GPSInfoIfdPointer"]};
i.JpegFile.prototype._exiftags={36864:["Exif Version","ExifVersion"],40960:["FlashPix Version","FlashpixVersion"],40961:["Color Space","ColorSpace"],37121:["Meaning of each component","ComponentsConfiguration"],37122:["Compressed Bits Per Pixel","CompressedBitsPerPixel"],40962:["Pixel X Dimension","PixelXDimension"],40963:["Pixel Y Dimension","PixelYDimension"],37500:["Manufacturer notes","MakerNote"],37510:["User comments","UserComment"],40964:["Related audio file","RelatedSoundFile"],36867:["Date Time Original","DateTimeOriginal"],36868:["Date Time Digitized","DateTimeDigitized"],37520:["DateTime subseconds","SubSecTime"],37521:["DateTimeOriginal subseconds","SubSecTimeOriginal"],37522:["DateTimeDigitized subseconds","SubSecTimeDigitized"],33434:["Exposure time","ExposureTime"],33437:["FNumber","FNumber"],34850:["Exposure program","ExposureProgram"],34852:["Spectral sensitivity","SpectralSensitivity"],34855:["ISO Speed Ratings","ISOSpeedRatings"],34856:["Optoelectric coefficient","OECF"],37377:["Shutter Speed","ShutterSpeedValue"],37378:["Aperture Value","ApertureValue"],37379:["Brightness","BrightnessValue"],37380:["Exposure Bias Value","ExposureBiasValue"],37381:["Max Aperture Value","MaxApertureValue"],37382:["Subject Distance","SubjectDistance"],37383:["Metering Mode","MeteringMode"],37384:["Light Source","LightSource"],37385:["Flash","Flash"],37386:["Focal Length","FocalLength"],37396:["Subject Area","SubjectArea"],41483:["Flash Energy","FlashEnergy"],41484:["Spatial Frequency Response","SpatialFrequencyResponse"],41486:["Focal Plane X Resolution","FocalPlaneXResolution"],41487:["Focal Plane Y Resolution","FocalPlaneYResolution"],41488:["Focal Plane Resolution Unit","FocalPlaneResolutionUnit"],41492:["Subject Location","SubjectLocation"],41493:["Exposure Index","ExposureIndex"],41495:["Sensing Method","SensingMethod"],41728:["File Source","FileSource"],41729:["Scene Type","SceneType"],41730:["CFA Pattern","CFAPattern"],41985:["Custom Rendered","CustomRendered"],41986:["Exposure Mode","Exposure Mode"],41987:["White Balance","WhiteBalance"],41988:["Digital Zoom Ratio","DigitalZoomRatio"],41990:["Scene Capture Type","SceneCaptureType"],41991:["Gain Control","GainControl"],41992:["Contrast","Contrast"],41993:["Saturation","Saturation"],41994:["Sharpness","Sharpness"],41995:["Device settings description","DeviceSettingDescription"],41996:["Subject distance range","SubjectDistanceRange"],42016:["Unique image ID","ImageUniqueID"],40965:["Interoperability tag","InteroperabilityIFDPointer"]};i.JpegFile.prototype._gpstags={0:["GPS tag version","GPSVersionID"],1:["North or South Latitude","GPSLatitudeRef"],2:["Latitude","GPSLatitude"],3:["East or West Longitude","GPSLongitudeRef"],4:["Longitude","GPSLongitude"],5:["Altitude reference","GPSAltitudeRef"],6:["Altitude","GPSAltitude"],7:["GPS time (atomic clock)","GPSTimeStamp"],8:["GPS satellites usedd for measurement","GPSSatellites"],9:["GPS receiver status","GPSStatus"],10:["GPS mesaurement mode","GPSMeasureMode"],11:["Measurement precision","GPSDOP"],12:["Speed unit","GPSSpeedRef"],13:["Speed of GPS receiver","GPSSpeed"],14:["Reference for direction of movement","GPSTrackRef"],15:["Direction of movement","GPSTrack"],16:["Reference for direction of image","GPSImgDirectionRef"],17:["Direction of image","GPSImgDirection"],18:["Geodetic survey data used","GPSMapDatum"],19:["Reference for latitude of destination","GPSDestLatitudeRef"],20:["Latitude of destination","GPSDestLatitude"],21:["Reference for longitude of destination","GPSDestLongitudeRef"],22:["Longitude of destination","GPSDestLongitude"],23:["Reference for bearing of destination","GPSDestBearingRef"],24:["Bearing of destination","GPSDestBearing"],25:["Reference for distance to destination","GPSDestDistanceRef"],26:["Distance to destination","GPSDestDistance"],27:["Name of GPS processing method","GPSProcessingMethod"],28:["Name of GPS area","GPSAreaInformation"],29:["GPS Date","GPSDateStamp"],30:["GPS differential correction","GPSDifferential"]};i.JpegFile.prototype._markers={192:["SOF0","_sofHandler","Baseline DCT"],193:["SOF1","_sofHandler","Extended sequential DCT"],194:["SOF2","_sofHandler","Progressive DCT"],195:["SOF3","_sofHandler","Lossless (sequential)"],197:["SOF5","_sofHandler","Differential sequential DCT"],198:["SOF6","_sofHandler","Differential progressive DCT"],199:["SOF7","_sofHandler","Differential lossless (sequential)"],200:["JPG",null,"Reserved for JPEG extensions"],201:["SOF9","_sofHandler","Extended sequential DCT"],202:["SOF10","_sofHandler","Progressive DCT"],203:["SOF11","_sofHandler","Lossless (sequential)"],205:["SOF13","_sofHandler","Differential sequential DCT"],206:["SOF14","_sofHandler","Differential progressive DCT"],207:["SOF15","_sofHandler","Differential lossless (sequential)"],196:["DHT",null,"Define Huffman table(s)"],204:["DAC",null,"Define arithmetic coding conditioning(s)"],208:["RST0",null,"Restart with modulo 8 count 0"],209:["RST1",null,"Restart with modulo 8 count 1"],210:["RST2",null,"Restart with modulo 8 count 2"],211:["RST3",null,"Restart with modulo 8 count 3"],212:["RST4",null,"Restart with modulo 8 count 4"],213:["RST5",null,"Restart with modulo 8 count 5"],214:["RST6",null,"Restart with modulo 8 count 6"],215:["RST7",null,"Restart with modulo 8 count 7"],216:["SOI",null,"Start of image"],217:["EOI",null,"End of image"],218:["SOS",null,"Start of scan"],219:["DQT",null,"Define quantization table(s)"],220:["DNL",null,"Define number of lines"],221:["DRI",null,"Define restart interval"],222:["DHP",null,"Define hierarchical progression"],223:["EXP",null,"Expand reference component(s)"],224:["APP0","_app0Handler","Reserved for application segments"],225:["APP1","_app1Handler"],226:["APP2",null],227:["APP3",null],228:["APP4",null],229:["APP5",null],230:["APP6",null],231:["APP7",null],232:["APP8",null],233:["APP9",null],234:["APP10",null],235:["APP11",null],236:["APP12",null],237:["APP13",null],238:["APP14",null],239:["APP15",null],240:["JPG0",null],241:["JPG1",null],242:["JPG2",null],243:["JPG3",null],244:["JPG4",null],245:["JPG5",null],246:["JPG6",null],247:["JPG7",null],248:["JPG8",null],249:["JPG9",null],250:["JPG10",null],251:["JPG11",null],252:["JPG12",null],253:["JPG13",null],254:["COM",null],1:["JPG13",null]};
i.JpegFile.prototype._addMetaGroup=function d(v,w){var x=new i.MetaGroup(v,w);this[x.fieldName]=x;this.metaGroups[x.fieldName]=x;return x};i.JpegFile.prototype._parseIfd=function g(P,K,A,I,H,Q,M){var L=i.parseNum(P,K,A+I,2);var O,N;var w;var B;var x,z,G;var y;var F;var J;var v;var D;var C;var E;E=this._addMetaGroup(Q,M);for(var O=0;O<L;O++){w=A+I+2+(O*12);B=i.parseNum(P,K,w,2);z=i.parseNum(P,K,w+2,2);y=i.parseNum(P,K,w+4,4);F=i.parseNum(P,K,w+8,4);if(this._types[z]===undefined){continue}x=this._types[z][0];G=this._types[z][1];if(G*y<=4){F=w+8}else{F=A+F}if(x=="UNDEFINED"){f=K.slice(F,F+y)}else{if(x=="ASCII"){J=K.slice(F,F+y);J=J.split("\x00")[0]}else{J=new Array();for(N=0;N<y;N++,F+=G){if(x=="BYTE"||x=="SHORT"||x=="LONG"){J.push(i.parseNum(P,K,F,G))}if(x=="SBYTE"||x=="SSHORT"||x=="SLONG"){J.push(i.parseSnum(P,K,F,G))}if(x=="RATIONAL"){D=i.parseNum(P,K,F,4);C=i.parseNum(P,K,F+4,4);J.push(new i.Rational(D,C))}if(x=="SRATIONAL"){D=i.parseSnum(P,K,F,4);C=i.parseSnum(P,K,F+4,4);J.push(new i.Rational(D,C))}J.push()}if(y===1){J=J[0]}}}if(H[B]!==undefined){E._addProperty(H[B][1],H[B][0],J)}}};i.JpegFile.prototype._jfifHandler=function k(w,v){if(this.jfif!==undefined){throw Error("Multiple JFIF segments found")}this._addMetaGroup("jfif","JFIF");this.jfif._addProperty("version_major","Version Major",this._binary_data.charCodeAt(v+5));this.jfif._addProperty("version_minor","Version Minor",this._binary_data.charCodeAt(v+6));this.jfif._addProperty("version","JFIF Version",this.jfif.version_major.value+"."+this.jfif.version_minor.value);this.jfif._addProperty("units","Density Unit",this._binary_data.charCodeAt(v+7));this.jfif._addProperty("Xdensity","X density",i.parseNum(">",this._binary_data,v+8,2));this.jfif._addProperty("Ydensity","Y Density",i.parseNum(">",this._binary_data,v+10,2));this.jfif._addProperty("Xthumbnail","X Thumbnail",i.parseNum(">",this._binary_data,v+12,1));this.jfif._addProperty("Ythumbnail","Y Thumbnail",i.parseNum(">",this._binary_data,v+13,1))};i.JpegFile.prototype._app0Handler=function a(x,w){var v=this._binary_data.slice(w,w+5);if(v==this._JFIF_IDENT){this._jfifHandler(x,w)}else{if(v==this._JFXX_IDENT){}else{}}};i.JpegFile.prototype._app1Handler=function q(x,w){var v=this._binary_data.slice(w,w+5);if(v==this._EXIF_IDENT){this._exifHandler(x,w+6)}else{}};i.JpegFile.prototype._exifHandler=function j(y,F){if(this.exif!==undefined){throw new Error("Multiple JFIF segments found")}var B;var A;var x;var C,D,z;var w=this._binary_data.slice(F,F+2);if(w==="II"){B="<"}else{if(w==="MM"){B=">"}else{throw new Error("Malformed TIFF meta-data. Unknown endianess: "+w)}}A=i.parseNum(B,this._binary_data,F+2,2);if(A!==42){throw new Error("Malformed TIFF meta-data. Bad magic: "+A)}x=i.parseNum(B,this._binary_data,F+4,4);this._parseIfd(B,this._binary_data,F,x,this._tifftags,"tiff","TIFF");if(this.tiff.ExifIfdPointer){this._parseIfd(B,this._binary_data,F,this.tiff.ExifIfdPointer.value,this._exiftags,"exif","Exif")}if(this.tiff.GPSInfoIfdPointer){this._parseIfd(B,this._binary_data,F,this.tiff.GPSInfoIfdPointer.value,this._gpstags,"gps","GPS");if(this.gps.GPSLatitude){var E;E=this.gps.GPSLatitude.value[0].asFloat()+(1/60)*this.gps.GPSLatitude.value[1].asFloat()+(1/3600)*this.gps.GPSLatitude.value[2].asFloat();if(this.gps.GPSLatitudeRef.value==="S"){E=-E}this.gps._addProperty("latitude","Dec. Latitude",E)}if(this.gps.GPSLongitude){var v;v=this.gps.GPSLongitude.value[0].asFloat()+(1/60)*this.gps.GPSLongitude.value[1].asFloat()+(1/3600)*this.gps.GPSLongitude.value[2].asFloat();if(this.gps.GPSLongitudeRef.value==="W"){v=-v}this.gps._addProperty("longitude","Dec. Longitude",v)}}};return i});
define("photocompress",function(e,f,d){var g=e("zepto");var i=e("jpegmeta");var k=e("jpegencode");var b={isIOSSubSample:function(o){var n=o.naturalWidth;var r=o.naturalHeight;var q=false;if(n*r>1024*1024){var p=document.createElement("canvas");var m=p.getContext("2d");p.width=p.height=1;m.drawImage(o,-n+1,0);q=!!(m.getImageData(0,0,1,1).data[3]===0);p=m=null}return q},getIOSImageRatio:function(p,u,q){var m=document.createElement("canvas");var v=m.getContext("2d");m.width=1;m.height=q;v.drawImage(p,0,0);var o=v.getImageData(0,0,1,q).data;var s=0;var r=q;var t=q;while(t>s){var n=o[(t-1)*4+3];if(n===0){r=t}else{s=t}t=(r+s)>>1}return t/q},transformCT:function(p,q,m,o){if(o>=5&&o<=8){p.width=m;p.height=q}else{p.width=q;p.height=m}var n=p.getContext("2d");switch(o){case 2:n.translate(q,0);n.scale(-1,1);break;case 3:n.translate(q,m);n.rotate(Math.PI);break;case 4:n.translate(0,m);n.scale(1,-1);break;case 5:n.rotate(0.5*Math.PI);n.scale(1,-1);break;case 6:n.rotate(0.5*Math.PI);n.translate(0,-m);break;case 7:n.rotate(0.5*Math.PI);n.translate(q,-m);n.scale(-1,1);break;case 8:n.rotate(-0.5*Math.PI);n.translate(-q,0);break;default:break}},acfix:function(p,n){var q=p.width;var s=p.height;var t=n.width;var o=n.height;var r,m;if(q>t&&q/s>=t/o){r=t;m=s*t/q}else{if(s>o&&s/q>=o/t){r=q*o/s;m=o}else{r=q;m=s}}return{width:r,height:m}},getImageBase64:function(T,v,u){v=g.extend({maxW:800,maxH:800,quality:0.85,orien:1},v);var s=T.naturalWidth;var A=T.naturalHeight;if((g.os.iphone||g.os.ipad)&&b.isIOSSubSample(T)){s=s/2;A=A/2}var t=v.maxH,P=v.maxW;var n=s,w=A;if(v.orien>=5&&v.orien<=8){n=A;w=s}if(n>w){t=t+P;P=t-P;t=t-P}var B=this.acfix({width:n,height:w},{width:P,height:t});var I=B.width;var p=B.height;var F=I;var S=p;if(v.orien>=5&&v.orien<=8){S=I;F=p}var q=document.createElement("canvas");var G=q.getContext("2d");this.transformCT(q,F,S,v.orien);g(q).appendTo(document.body).css({display:"none"});if(g.os.iphone||g.os.ipad){var o=document.createElement("canvas");var r=o.getContext("2d");var O=1024;o.width=o.height=O;var H=b.getIOSImageRatio(T,s,A);var C=0;while(C<A){if(C+O>A){var R=A-C}else{R=O}var D=0;while(D<s){if(D+O>s){var E=s-D}else{E=O}r.clearRect(0,0,O,O);r.drawImage(T,-D,-C);var y=Math.floor(D*F/s);var z=Math.ceil(E*F/s);var x=Math.floor(C*S/A/H);var K=Math.ceil(R*S/A/H);G.drawImage(o,0,0,E,R,y,x,z,K);D+=O}C+=O}o=r=null}else{G.drawImage(T,0,0,s,A,0,0,F,S)}var Q="";if(q.width>200&&q.height>200){var J=document.createElement("canvas");J.width=J.height=70;var M=J.getContext("2d");if(q.width>q.height){M.drawImage(q,0,0,q.height,q.height,0,0,70,70)}else{M.drawImage(q,0,0,q.width,q.width,0,0,70,70)}Q=J.toDataURL("image/png")}var m;if(v.format=="image/jpeg"&&g.os.android){var N=G.getImageData(0,0,q.width,q.height);var L=new k(v.quality*100);L.encode(N,v.quality*100,function(U){L=null;u({base64:U,thumb:Q,height:p,width:I})})}else{m=q.toDataURL(v.format,v.quality);u({base64:m,thumb:Q,height:p,width:I})}g(q).remove();q=G=null}};function h(n,o,p){var m=new Image();m.onload=function(){b.getImageBase64(this,o,function(q){var r=g.extend({},{param:o});r.dataUrl=n;if(q.base64==-1){r.base64=n}else{r.base64=q.base64;r.thumb=q.thumb}r.width=q.width;r.height=q.height;r.rawWidth=m.naturalWidth;r.rawHeight=m.naturalHeight;p(null,r)})};m.onerror=function(){p(new Error(""),null)};m.src=n}function a(m,q){var o=new FileReader();var n=null;var p=null;o.onload=function(s){if(m.type==="image/jpeg"){try{p=new i.JpegFile(s.target.result,m.name)}catch(r){n=r}}q(n,p)};o.onerror=function(r){q(r.target.error,p)};o.readAsBinaryString(m)}function c(){if(g.browser.uc&&g.browser.version=="8.4"){return false}return(window.URL||window.webkitURL||window.mozURL)}function j(n,p){var m=c();if(m){p(null,m.createObjectURL(n))}else{var o=new FileReader();o.onload=function(q){p(null,q.target.result)};o.onerror=function(q){p(q.target.error,null)};o.readAsDataURL(n)}}function l(m,n,p){if(!m){return}var o=g.extend({format:m.type=="image/png"?"image/png":"image/jpeg"},n);j(m,function(q,r){if(q){p(new Error("URL"),null)}else{if(!g.browser.ieMobile){a(m,function(s,t){if(t&&t.tiff&&t.tiff.Orientation){o=g.extend({orien:t.tiff.Orientation.value,make:t.tiff.Make&&t.tiff.Make.value,model:t.tiff.Model&&t.tiff.Model.value,date:t.tiff.DateTime&&t.tiff.DateTime.value},o)}h(r,o,p)})}else{h(r,o,p)}}})}return{getImageURL:j,getImageMeta:a,getImageData:l,compressFile:l,compressSrc:h}});
define("file",function(b,a,c){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){return setTimeout(i,30)};var f=b("zepto");var e=b("common");var h=b("jpegencode");var g=b("photocompress");var d={FileReader:function(){return window.File&&window.FileList&&window.FileReader&&window.Blob},URL:function(){if(f.browser.uc&&f.browser.version=="8.4"){return false}return(window.URL||window.webkitURL)},toDataURL:function(){var i=document.createElement("canvas");i.setAttribute("width","1");i.setAttribute("height","1");var j=i.toDataURL("image/jpeg");if(!j||j=="data:,"){return""}else{if(~j.indexOf("/png")){return"png"}else{if(~j.indexOf("/jpeg")){return"jpg"}else{return true}}}}};if(!d.toDataURL()&&d.FileReader()){b.async("toDataURL")}a=c.exports={init:function(j){this.config=j;if(j.background instanceof Image){this.background=j.background}else{if(f.type(j.background)=="string"){var i=new Image();i.onload=function(){a.background=j.background};i.src=j.background}}var k=f(j.canvas);if(k.length){this.canvas=k[0];this.ctx=k[0].getContext("2d");this.update()}this.bind()},x:0,y:0,scale:1,rotate:0,center:{x:0,y:0},getDist:function(j,l,i,k){return Math.sqrt(Math.pow(i-j,2)+Math.pow(k-l,2),2)},support:function(){return d.FileReader()},bind:function(){var m=false,l=false;var j=0,i=0,o,k,n;f(document.body).on("touchstart",a.config.canvas,function(p){m=true;j=p.touches[0].pageX;i=p.touches[0].pageY}).on("touchmove",function(w){if(!m){return}if(w.touches.length>1){var t=f(w.target).offset();o=[{pageX:w.touches[0].pageX-t.left,pageY:w.touches[0].pageY-t.top},{pageX:w.touches[1].pageX-t.left,pageY:w.touches[1].pageY-t.top}];a.center={x:(o[0].pageX-o[1].pageX)/2+o[1].pageX,y:(o[0].pageY-o[1].pageY)/2+o[1].pageY};if(k){var v=a.getDist(o[0].pageX,o[0].pageY,o[1].pageX,o[1].pageY);var u=a.getDist(k[0].pageX,k[0].pageY,k[1].pageX,k[1].pageY);a.scale*=v/u;var z=k[0].pageX-n.x;var y=k[0].pageY-n.y;var q=Math.atan2(y,z);z=o[0].pageX-a.center.x;y=o[0].pageY-a.center.y;var p=Math.atan2(y,z);var x=Math.sin(p-q);var A=Math.cos(p-q);a.rotate+=p-q;a.x+=a.center.x-n.x;a.y+=a.center.y-n.y}k=o;n=a.center}else{var x=Math.sin(-a.rotate);var A=Math.cos(-a.rotate);var s=w.touches[0].pageX-j;var r=w.touches[0].pageY-i;a.x+=(s*A-r*x)/a.scale;a.y+=(s*x+r*A)/a.scale;j=w.touches[0].pageX;i=w.touches[0].pageY}a.update();l=true;return false}).on("touchend",function(){if(m&&l){k=undefined;n=undefined}m=l=false}).on("change",a.config.file,function(p){g.compressFile(p.target.files[0],a.config.param,function(r,q){if(r){a.config.onError&&a.config.onError(r)}else{a.avatar=new Image();a.avatar.src=q.base64;a.avatar.width=q.width;a.avatar.height=q.height;a.avatar.onload=function(){a.update()};a.scale=1;a.rotate=0;a.x=a.y=0;a.center.x=a.center.y=0;a.config.onChange&&a.config.onChange()}})})},encode:function(k){if(f.os.android){if(a.canvas){var j=a.ctx.getImageData(0,0,a.canvas.width,a.canvas.height);var i=new h(a.config.param.quality*100);i.encode(j,a.config.param.quality*100,k)}else{alert("")}}else{if(a.canvas){k(a.canvas.toDataURL(a.config.param.format,a.config.param.quality))}else{alert("")}}},update:function(){if(!a.ctx){return}requestAnimationFrame(function(){var i=document.createElement("img");i.src="http://wx.xiaoniuapp.com/xn-wechat-activity/goodvoice/images/flower.jpg";var j=a.ctx.createPattern(i,"no-repeat");a.ctx.fillStyle=j;a.ctx.fillRect(0,0,a.canvas.width,a.canvas.height);if(a.avatar){a.ctx.save();a.ctx.translate(a.center.x,a.center.y);a.ctx.scale(a.scale,a.scale);a.ctx.rotate(a.rotate);a.ctx.translate(-a.center.x,-a.center.y);a.ctx.drawImage(a.avatar,a.x,a.y);a.ctx.restore()}if(a.background){a.ctx.drawImage(a.background,0,0,a.background.width,a.background.height,0,0,a.canvas.width,a.canvas.height)}})}}});